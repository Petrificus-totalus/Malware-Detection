from flask import session, jsonify, g


def login_required(view_func):
    """验证登陆状态的装饰器"""
    def wrapper(*args, **kwargs):
        username = session.get("username")
        if username is not None:   # 用户是登陆的，执行视图函数
            g.username = username
            return view_func(*args, **kwargs)
        else:
            return jsonify({{"code": 0, "msg": "未登陆"}})

    return wrapper
